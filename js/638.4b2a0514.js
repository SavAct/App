"use strict";(globalThis["webpackChunksavactapp"]=globalThis["webpackChunksavactapp"]||[]).push([[638],{93638:(e,t,o)=>{o.r(t),o.d(t,{default:()=>S});var n=o(59835),r=o(86970),a=o(61957);const i=e=>((0,n.dD)("data-v-fa297266"),e=e(),(0,n.Cn)(),e),c={id:"qrcam"},s={class:"q-pa-sm"},l={class:"row justify-center full-height full-width text-center","q-icon":"check_circle_outline"},u={class:"absolute-bottom info q-pa-sm"},d=i((()=>(0,n._)("div",null,"Upload from file",-1)));function v(e,t,o,i,v,f){const h=(0,n.up)("q-spinner"),g=(0,n.up)("q-inner-loading"),m=(0,n.up)("q-btn"),p=(0,n.up)("q-icon"),w=(0,n.up)("qrcode-stream"),y=(0,n.up)("qrcode-capture"),E=(0,n.up)("q-page");return(0,n.wg)(),(0,n.j4)(E,{id:"qrpage",class:"items-center justify-evenly full-height full-width"},{default:(0,n.w5)((()=>[(0,n._)("div",c,[(0,n.Wm)(g,{showing:e.loading},{default:(0,n.w5)((()=>[(0,n.Wm)(h,{size:"40%",color:"primary"})])),_:1},8,["showing"]),(0,n.Wm)(w,{class:"full-height full-width",torch:e.torchActive,paused:e.paused,onDetect:e.onDetect,onError:e.onError,constraints:e.constraints,onCameraOn:e.onInit},{default:(0,n.w5)((()=>[(0,n._)("div",{class:(0,r.C_)(["full-height full-width",{confirmation:e.showScanConfirmation}])},[(0,n._)("div",s,[(0,n.Wm)(m,{onClick:e.switchCamera,round:"",icon:"flip_camera_ios",color:"gray"},null,8,["onClick"]),(0,n.wy)((0,n.Wm)(m,{onClick:t[0]||(t[0]=t=>e.torchActive=!e.torchActive),class:(0,r.C_)(["self-end",e.torchActive?"text-blue":"text-white"]),round:"",icon:"flash_on"},null,8,["class"]),[[a.F8,e.torchSupported]])]),(0,n.wy)((0,n._)("div",l,[(0,n.Wm)(p,{name:"check_circle_outline",alt:"Checkmark",size:"128px",color:"green",class:"self-center"})],512),[[a.F8,e.showScanConfirmation]])],2)])),_:1},8,["torch","paused","onDetect","onError","constraints","onCameraOn"])]),(0,n.Uk)(" Camera type: "+(0,r.zw)(e.constraints)+" ",1),(0,n.wy)((0,n._)("div",u,[(0,n._)("div",null,(0,r.zw)(e.errorMsg),1),(0,n._)("div",null,(0,r.zw)(e.qrdata),1)],512),[[a.F8,e.errorMsg||e.qrdata]]),(0,n._)("div",null,[d,(0,n.Wm)(y,{onDecode:e.onDecode},null,8,["onDecode"])])])),_:1})}var f=o(60499),h=o(96009),g=o(28339),m=o(6827),p=o(17779),w=function(e,t,o,n){function r(e){return e instanceof o?e:new o((function(t){t(e)}))}return new(o||(o=Promise))((function(o,a){function i(e){try{s(n.next(e))}catch(t){a(t)}}function c(e){try{s(n["throw"](e))}catch(t){a(t)}}function s(e){e.done?o(e.value):r(e.value).then(i,c)}s((n=n.apply(e,t||[])).next())}))};const y=(0,n.aZ)({name:"page-qr-scanner",components:{QrcodeStream:h.vG,QrcodeCapture:h.Ye},setup(){const e=(0,g.tv)(),t=(0,f.iH)(""),o=(0,f.iH)(""),r=(0,f.iH)(null),a=(0,f.iH)(!1),i=(0,f.iH)(!1),c=(0,f.iH)({}),s=(0,f.iH)(!1),l=(0,f.iH)(!1),u=(0,f.iH)(!1),d=(0,f.iH)(!1),v=(0,f.iH)(16/9);function h(e){e.preventDefault(),p.log("is allowDrop")}function y(e){e.preventDefault(),p.log("dragged",e)}function E(e){return new Promise((t=>{window.setTimeout(t,e)}))}function D(e){return w(this,void 0,void 0,(function*(){o.value=e[0].rawValue,p.log("onDetect",e),i.value=!0,_(o.value),yield E(500),i.value=!1}))}function _(t){let o,n;if(t.startsWith("https://")?(n=t.substring(8),o=!0):t.startsWith("http://")?(n=t.substring(7),o=!0):(n=t,o=!1),n.startsWith("www.")&&(n=t.substring(4),o=!0),o&&n.startsWith("savact.app")){let t=n.indexOf("#")+1;if(t>0){p.log("link",n),p.log("s",t),p.log("s",n.substring(t));let o=n.substring(t);"/"!=o[0]&&(o="/"+o),p.log("QR Code go to:",o),e.push(o)}}}function b(e){return w(this,void 0,void 0,(function*(){p.log("onError",e),"NotAllowedError"===e.name?r.value="ERROR: you need to grant camera access permisson":"NotFoundError"===e.name?r.value="ERROR: no camera on this device":"NotSupportedError"===e.name?r.value="ERROR: secure context required (HTTPS, localhost)":"NotReadableError"===e.name?r.value="ERROR: is the camera already in use?":"OverconstrainedError"===e.name?r.value="ERROR: installed cameras are not suitable":"StreamApiNotSupportedError"===e.name&&(r.value="ERROR: Stream API is not supported in this browser"),m.Z.create({message:"Camera error",caption:String(r.value),position:"top"})}))}function R(e){return w(this,void 0,void 0,(function*(){p.log("initData on QR Scanner Init",e),u.value=!!e.torch,e.height&&e.width&&(v.value=e.height.max/e.width.max,W()),s.value=i.value}))}function C(){switch(c.value.facingMode){case"front":c.value.facingMode="environment";break;case"rear":c.value.facingMode="user";break;default:c.value.facingMode="user"}}function q(e){e.preventDefault(),p.log("ondragover event",e)}function k(e){return w(this,void 0,void 0,(function*(){try{const{content:t}=yield e;o.value=t}catch(t){switch(p.log(t),t.name){case"DropImageFetchError":r.value="Sorry, you can't load cross-origin images :/";break;case"DropImageDecodeError":r.value="Sorry, you can't load cross-origin images :/";break;default:r.value=t.message;break}}}))}function H(e){p.log("Docode from file",e),o.value=e}function S(e){e.catch(p.error)}function W(){let e=document.getElementById("qrpage"),t=document.getElementById("qrcam");if(null!==t&&void 0!==(null===e||void 0===e?void 0:e.offsetWidth)&&void 0!==(null===e||void 0===e?void 0:e.offsetHeight)){let e=document.getElementsByTagName("header")[0],o=document.getElementsByTagName("footer")[0],n=e.offsetHeight+o.offsetHeight;t.style.maxWidth=window.innerHeight-n+"px"}}return(0,n.bv)((()=>{window.addEventListener("resize",W)})),(0,n.Jd)((()=>{window.removeEventListener("resize",W)})),{code:t,qrdata:o,onDecode:H,onDetect:D,onInit:R,onError:b,errorMsg:r,loading:a,showScanConfirmation:s,paused:i,constraints:c,switchCamera:C,torchActive:l,torchSupported:u,dragover:d,onDragOver:q,onDetectDropZone:k,dropZoneErrors:S,allowDrop:h,drop:y}}});var E=o(11639),D=o(69885),_=o(60854),b=o(13902),R=o(68879),C=o(22857),q=o(69984),k=o.n(q);const H=(0,E.Z)(y,[["render",v],["__scopeId","data-v-fa297266"]]),S=H;k()(y,"components",{QPage:D.Z,QInnerLoading:_.Z,QSpinner:b.Z,QBtn:R.Z,QIcon:C.Z})}}]);